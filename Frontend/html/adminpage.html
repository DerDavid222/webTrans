<!DOCTYPE html>
<html lang="de">
  <head>
    <link rel="stylesheet" href="../css/header_stylesheet.css" />
    <link rel="stylesheet" href="../css/footer_stylesheet.css" />
    <link rel="stylesheet" href="../css/adminpage_stylesheet.css" />

    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      type="text/javascript"
    ></script>
    <script src="../javascript/sessionHandling.js"></script>
    <script
      src="https://use.fontawesome.com/releases/v5.15.1/js/all.js"
      data-auto-a11y="true"
    ></script>
    <script src="../javascript/userLogin.js"></script>

    <script>
      // schutz der seite, nur angemeldete admins haben zugang, alle anderen werden zur login seite geleitet
      if (!isAdminLoggedIn()) window.location.href = "login.html";
    </script>

    <meta charset="utf-8" />
    <title>WebTrans</title>

    <script>
      let changes = 0;
      let rowsToChange = new Array();

      function changeValues(){
        if(changes === 0) {
          changes = 1;
          document.getElementById("changeBtn").innerText = "Speichern";

          let rows = document.querySelectorAll("table tr");
          rowsToChange = new Array();

          for (let i = 1; i < rows.length; i++) {
            
            let checkbox = rows[i].querySelector("input[type='checkbox']");
            if (checkbox.checked) {
              rowsToChange.push(rows[i]);
              rows[i].setAttribute("style", "background-color:#ff9494");
              tabledatas = rows[i].querySelectorAll("td");
              for(let j=0; j < tabledatas.length-1; j++){
                tabledatas[j].setAttribute("contenteditable", "true");
              }
            }
          }
        } else if(changes === 1){
          changes = 0;
          document.getElementById("changeBtn").innerText = "Bearbeiten";
          for(let i=0; i<rowsToChange.length; i++){
            tabledatas = rowsToChange[i].querySelectorAll("td");
            for(let j=0; j < tabledatas.length-1; j++){
                tabledatas[j].setAttribute("contenteditable", "false");
            }
            if(rowsToChange[i].rowIndex%2 === 0){
              rowsToChange[i].setAttribute("style", "background-color:white");
            } else {
              rowsToChange[i].setAttribute("style", "background-color:#f2f2f2");
            }
          }          
        }
      }

      function deleteRows(){
        let rows = document.querySelectorAll("table tr");
        for (let i = rows.length-1; i>0; i--){
          let checkbox = rows[i].querySelector("input[type='checkbox']");
          if (checkbox.checked){
            rows[i].parentNode.removeChild(rows[i]);
          }
        }
      }
    </script>
  </head>

  <body>
    <!-----------------------------------HEADER------------------------------------->
    <header>
      <img src="../Bilder/WebTransLogoNeu.jpg" class="logo" alt="Firmen_Logo" />

      <nav class="navbar">
        <ul class="login_ul">
          <li>
            <a href="login.html" class="login" id="idlogin">Login</a>
          </li>
        </ul>

        <ul class="nav_ul">
          <li>
            <a href="start.html">Start</a>
          </li>
          <li>
            <a href="dienstleistungen.html">Dienstleistungen</a>
          </li>
          <li>
            <a href="anfrage.html">Anfrage</a>
          </li>
          <li>
            <a href="adminpage.html" class="active" id="idadmin">Adminpage</a>
          </li>
        </ul>
      </nav>
    </header>

    <!-----------------------------------BODY----------------------------------------------------->

    <main>
      <section class="table_section">
        <table>
          <tr>
            <th class="checkbox_td"></th>
            <th>Benutzername</th>
            <th>Anrede</th>
            <th>Name</th>
            <th>Vorname</th>
            <th>E-Mail</th>
            <th>Anschrift</th>
            <th>PLZ</th>
            <th>Ort</th>
            <th>Admin</th>
          </tr>
          <tr>
            <td class="checkbox_td"><input type="checkbox" id="selected" name="id1" value="id"></td>
            <td>MaxMustermann</td>
            <td>Herr</td>
            <td>Mustermann</td>
            <td>Max</td>
            <td>max.mustermann@gmx.de</td>
            <td>Musterstr. 12</td>
            <td>12345</td>
            <td>Musterstadt</td>
            <td>1</td>
          </tr>
          <tr>
            <td class="checkbox_td"><input type="checkbox" id="selected" name="id2" value="id"></td>
            <td>Batman</td>
            <td>Frau</td>
            <td>Wayne</td>
            <td>Bruce</td>
            <td>bat.man@gmx.de</td>
            <td>Batcave 42</td>
            <td>54321</td>
            <td>Gotham</td>
            <td>0</td>            
          </tr>
          <tr>
            <td class="checkbox_td"><input type="checkbox" id="selected" name="id3" value="id"></td>
            <td>PeterPan</td>
            <td>Herr</td>
            <td>Pan</td>
            <td>Peter</td>
            <td>peterpan@gmx.de</td>
            <td>Nimmerweg 23</td>
            <td>98765</td>
            <td>Nimmerland</td>
            <td>0</td>
          </tr>
        </table>
      </section>
      <section class="button_section">
        <button id="changeBtn" onclick="changeValues()">Bearbeiten</button>
        <button id="deleteBtn" onclick="deleteRows()">Löschen</button>
      </section>
    </main>

    <!-----------------------------------FOOTER------------------------------------->
    <footer>
      <ul>
        <li>
          <h3 class="footer-text">Kontakt & Impressum</h3>
        </li>
        <li class="footer-text">Max Mustermann</li>
        <li class="footer-text">Musterstraße 6</li>
        <li class="footer-text">72525 Musterstadt</li>
        <li class="footer-text">Tel: 0152 3456789</li>
        <li><a href="impressum.html" class="footer-text">Impressum</a></li>
      </ul>

      <ul>
        <li>
          <h3 class="footer-text">WebTrans</h3>
        </li>
        <li class="footer-text">Nationale & internationale Transporte</li>
        <li class="footer-text">24h Express Dienst</li>
        <li class="footer-text">Umzüge Europaweit</li>
        <li class="footer-text">Lagerei</li>
      </ul>
      <ul>
        <li>
          <h3 class="footer-text">Aktuelles</h3>
        </li>
        <li class="footer-text">
          Besinnliche Feiertage und einen guten Rutsch ins das neue Jahr 2023!
        </li>
        <li class="footer-text">
          Wir sind wieder wie gewohnt ab dem 04.01.2023 für Sie da!
        </li>
      </ul>
      <ul>
        <li>
          <h3 class="footer-text">Social Media</h3>
        </li>
        <li>
          <a href="https://de-de.facebook.com/" target="_blank"
            ><i class="fab fa-facebook-f"></i
          ></a>
          <a href="https://www.instagram.com/" target="_blank"
            ><i class="fab fa-instagram"></i
          ></a>
        </li>
      </ul>
    </footer>

    <script>
      $(document).ready(function () {
        adjustNavigation();
      });
    </script>
  </body>
</html>
